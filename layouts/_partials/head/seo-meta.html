{{/* Canonical URL */}}
<link rel="canonical" href="{{ .Permalink }}">

{{/* 多語言支援 */}}
{{- if .IsTranslated -}}
  {{- range .AllTranslations -}}
    <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}">
  {{- end -}}
{{- end -}}

{{/* Robots */}}
{{- $robots := "index, follow" -}}
{{- if .Params.noindex -}}
  {{- $robots = "noindex, nofollow" -}}
{{- else if .Params.nofollow -}}
  {{- $robots = "index, nofollow" -}}
{{- end -}}
<meta name="robots" content="{{ $robots }}">

{{/* 發布日期 */}}
{{- if not .Date.IsZero -}}
  <meta name="article:published_time" content="{{ .Date.Format `2006-01-02T15:04:05Z07:00` }}">
{{- end -}}

{{/* 修改日期 */}}
{{- if not .Lastmod.IsZero -}}
  <meta name="article:modified_time" content="{{ .Lastmod.Format `2006-01-02T15:04:05Z07:00` }}">
{{- end -}}

{{/* 網站驗證 */}}
{{- with site.Params.seo.google_site_verification -}}
  <meta name="google-site-verification" content="{{ . }}">
{{- end -}}

{{- with site.Params.seo.bing_site_verification -}}
  <meta name="msvalidate.01" content="{{ . }}">
{{- end -}}

{{- with site.Params.seo.yandex_verification -}}
  <meta name="yandex-verification" content="{{ . }}">
{{- end -}}

{{/* 結構化數據 */}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "{{ if .IsHome }}WebSite{{ else if eq .Type `post` }}Article{{ else }}WebPage{{ end }}",
  "name": "{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }}{{ end }}",
  "headline": "{{ .Title }}",
  "description": "{{ with .Description }}{{ . }}{{ else }}{{ .Summary | plainify | truncate 160 }}{{ end }}",
  "url": "{{ .Permalink }}",
  {{- if .IsHome }}
  "potentialAction": {
    "@type": "SearchAction",
    "target": "{{ site.BaseURL }}search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  },
  {{- end }}
  "publisher": {
    "@type": "Organization",
    "name": "{{ site.Title }}",
    "url": "{{ site.BaseURL }}"
  }
  {{- if not .Date.IsZero }},
  "datePublished": "{{ .Date.Format `2006-01-02T15:04:05Z07:00` }}"
  {{- end }}
  {{- if not .Lastmod.IsZero }},
  "dateModified": "{{ .Lastmod.Format `2006-01-02T15:04:05Z07:00` }}"
  {{- end }}
}
</script>
